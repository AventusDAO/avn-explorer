module.exports = class Data1763040279227 {
    name = 'Data1763040279227'

    async up(db) {
        await db.query(`CREATE TABLE "balance_config" ("id" character varying NOT NULL, "account_address" text NOT NULL, "prometheus_tags" text NOT NULL, "warning_threshold" text NOT NULL, "danger_threshold" text NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "updated_at" TIMESTAMP WITH TIME ZONE NOT NULL, CONSTRAINT "PK_2cf151d1965d9ac63ded0e784d7" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_586e7f98ba3f142fd8441fecfc" ON "balance_config" ("account_address") `)
        await db.query(`CREATE TABLE "balance_state" ("id" character varying NOT NULL, "account_address" text NOT NULL, "last_checked_block" integer NOT NULL, "last_checked_timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "current_balance" text NOT NULL, "is_warning" boolean NOT NULL, "is_danger" boolean NOT NULL, "updated_at" TIMESTAMP WITH TIME ZONE NOT NULL, "config_id" character varying, CONSTRAINT "PK_f38ab35fed86b05fe104eb970ce" PRIMARY KEY ("id"))`)
        await db.query(`CREATE UNIQUE INDEX "IDX_81b8032321e62f5f1d296385e2" ON "balance_state" ("account_address") `)
        await db.query(`CREATE INDEX "IDX_84c4dd627a15c09f2841d0a6af" ON "balance_state" ("config_id") `)
        await db.query(`CREATE TABLE "event_config" ("id" character varying NOT NULL, "event_name" text NOT NULL, "prometheus_tags" text NOT NULL, "include_metadata" boolean NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "updated_at" TIMESTAMP WITH TIME ZONE NOT NULL, CONSTRAINT "PK_17d6f400fba0a31c366b32b7aa3" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_f03994d15eb9e78573f41361a0" ON "event_config" ("event_name") `)
        await db.query(`CREATE TABLE "balance_alert" ("id" character varying NOT NULL, "account_address" text NOT NULL, "alert_type" text NOT NULL, "threshold" text NOT NULL, "actual_balance" text NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "config_id" character varying, CONSTRAINT "PK_18a678acd5d11fc2c2f2009a325" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_4e74c411dd33a326285c9b508b" ON "balance_alert" ("account_address") `)
        await db.query(`CREATE INDEX "IDX_a1719e3c2425555717d6e25ca5" ON "balance_alert" ("alert_type") `)
        await db.query(`CREATE INDEX "IDX_e7d0494732308e9db8fb4082b6" ON "balance_alert" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_a8c5243c4a2e8118151198e204" ON "balance_alert" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_127900b41c38ff25f04a961962" ON "balance_alert" ("config_id") `)
        await db.query(`CREATE TABLE "event_occurrence" ("id" character varying NOT NULL, "event_name" text NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "extrinsic_hash" text, "event_index" integer NOT NULL, "section" text NOT NULL, "method" text NOT NULL, "metadata" text, "args" text NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "config_id" character varying, CONSTRAINT "PK_15f3eaeafc7a718d56affa41212" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_e030a2e469a7f99a55abd6e910" ON "event_occurrence" ("event_name") `)
        await db.query(`CREATE INDEX "IDX_5dfd3a7d5fa36acb22b16e023c" ON "event_occurrence" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_bfee410af5ca0f2595388e483b" ON "event_occurrence" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_6fa53894f8eb7ae8182c7fe136" ON "event_occurrence" ("extrinsic_hash") `)
        await db.query(`CREATE INDEX "IDX_49a49dd406ea98344acef71c49" ON "event_occurrence" ("section") `)
        await db.query(`CREATE INDEX "IDX_ffe09f5fb28a31374f8fbbc991" ON "event_occurrence" ("method") `)
        await db.query(`CREATE INDEX "IDX_e0cd13d154ac23f3cc9b106a67" ON "event_occurrence" ("config_id") `)
        await db.query(`ALTER TABLE "balance_state" ADD CONSTRAINT "FK_84c4dd627a15c09f2841d0a6af9" FOREIGN KEY ("config_id") REFERENCES "balance_config"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "balance_alert" ADD CONSTRAINT "FK_127900b41c38ff25f04a9619626" FOREIGN KEY ("config_id") REFERENCES "balance_config"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "event_occurrence" ADD CONSTRAINT "FK_e0cd13d154ac23f3cc9b106a67c" FOREIGN KEY ("config_id") REFERENCES "event_config"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "balance_config"`)
        await db.query(`DROP INDEX "public"."IDX_586e7f98ba3f142fd8441fecfc"`)
        await db.query(`DROP TABLE "balance_state"`)
        await db.query(`DROP INDEX "public"."IDX_81b8032321e62f5f1d296385e2"`)
        await db.query(`DROP INDEX "public"."IDX_84c4dd627a15c09f2841d0a6af"`)
        await db.query(`DROP TABLE "event_config"`)
        await db.query(`DROP INDEX "public"."IDX_f03994d15eb9e78573f41361a0"`)
        await db.query(`DROP TABLE "balance_alert"`)
        await db.query(`DROP INDEX "public"."IDX_4e74c411dd33a326285c9b508b"`)
        await db.query(`DROP INDEX "public"."IDX_a1719e3c2425555717d6e25ca5"`)
        await db.query(`DROP INDEX "public"."IDX_e7d0494732308e9db8fb4082b6"`)
        await db.query(`DROP INDEX "public"."IDX_a8c5243c4a2e8118151198e204"`)
        await db.query(`DROP INDEX "public"."IDX_127900b41c38ff25f04a961962"`)
        await db.query(`DROP TABLE "event_occurrence"`)
        await db.query(`DROP INDEX "public"."IDX_e030a2e469a7f99a55abd6e910"`)
        await db.query(`DROP INDEX "public"."IDX_5dfd3a7d5fa36acb22b16e023c"`)
        await db.query(`DROP INDEX "public"."IDX_bfee410af5ca0f2595388e483b"`)
        await db.query(`DROP INDEX "public"."IDX_6fa53894f8eb7ae8182c7fe136"`)
        await db.query(`DROP INDEX "public"."IDX_49a49dd406ea98344acef71c49"`)
        await db.query(`DROP INDEX "public"."IDX_ffe09f5fb28a31374f8fbbc991"`)
        await db.query(`DROP INDEX "public"."IDX_e0cd13d154ac23f3cc9b106a67"`)
        await db.query(`ALTER TABLE "balance_state" DROP CONSTRAINT "FK_84c4dd627a15c09f2841d0a6af9"`)
        await db.query(`ALTER TABLE "balance_alert" DROP CONSTRAINT "FK_127900b41c38ff25f04a9619626"`)
        await db.query(`ALTER TABLE "event_occurrence" DROP CONSTRAINT "FK_e0cd13d154ac23f3cc9b106a67c"`)
    }
}
