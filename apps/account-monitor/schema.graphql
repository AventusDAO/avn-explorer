type Account @entity {
  id: ID!
  avtBalance: BigInt! @index
  tokens: [AccountToken!]! @derivedFrom(field: "account")
  nfts: [AccountNft!]! @derivedFrom(field: "account")
  marketsAsOracle: [PredictionMarketCreation!]! @derivedFrom(field: "oracle")
  receivedTransfers: [PredictionMarketAssetTransfer!]! @derivedFrom(field: "to")
}

type AccountNft @entity {
  id: ID!
  account: Account
  nft: Nft
}

type AccountToken @entity {
  id: ID!
  account: Account
  token: Token
  balance: BigInt! @index
}

type Nft @entity {
  id: ID!
  totalSupply: Int!
  accounts: [AccountNft!]! @derivedFrom(field: "nft")
}

type Token @entity {
  id: ID!
  accounts: [AccountToken!]! @derivedFrom(field: "token")
  name: String
}

type NftTransfer @entity {
  id: ID!
  blockNumber: BigInt! @index
  timestamp: DateTime! @index
  extrinsicHash: String! @index
  from: Account
  to: Account
  relayer: Account
  payer: Account
  nonce: BigInt
  nft: Nft
  pallet: String! @index
  method: String! @index
}

type TokenTransfer @entity {
  id: ID!
  blockNumber: BigInt! @index
  timestamp: DateTime! @index
  extrinsicHash: String @index
  from: Account
  to: Account
  relayer: Account
  payer: Account
  nonce: BigInt
  scheduleName: String
  senderNonce: BigInt
  t1Recipient: String
  lowerId: Int
  amount: BigInt! @index
  token: Token
  pallet: String! @index
  method: String! @index
}

type TokenLookup @entity {
  tokenId: String! @index
  tokenName: String! @index
}

type ScheduledLowerTransaction @entity {
  id: ID!
  name: String!
  scheduledTransactionName: String!
  from: String
  amount: BigInt
  lowerId: Int
  tokenId: String
  t1Recipient: String
}

type CrossChainTransactionEvent @entity {
  id: ID!
  name: String!
  args: JSON!
  ethEventIdSignature: String!
  ethEventIdTransactionHash: String!
  extrinsicHash: String!
  extrinsicIndexInBlock: BigInt!
  extrinsicSuccess: Boolean!
  extrinsicBlockNumber: BigInt! @index
  rejectionReason: String
}

type PredictionMarketCreation @entity {
  id: ID!
  blockNumber: BigInt @index

  amount: String @index
  baseAssetKind: String @index
  baseAssetValue: Int
  creatorFee: Int
  disputeDuration: Int
  gracePeriod: Int
  oracleDuration: Int
  disputeMechanism: String @index
  marketType: String @index
  oracle: Account! @index
  spotPrices: [String!]
  swapFee: String
}

type PredictionMarketTrade @entity {
  id: ID!
  blockNumber: BigInt @index

  operationType: String! @index # "buy" or "sell"
  amountIn: String @index
  marketId: String @index
  maxPrice: String
  assetCount: Int
  assetKind: String @index
  assetValue: [String!]
  strategy: String @index
}

type PredictionMarketTokenWithdrawal @entity {
  id: ID!
  blockNumber: BigInt @index

  amount: String @index
  token: String @index
}

type PredictionMarketShareRedemption @entity {
  id: ID!
  blockNumber: BigInt @index

  marketId: String @index
}

type PredictionMarketAssetTransfer @entity {
  id: ID!
  blockNumber: BigInt @index

  amount: String @index
  to: Account! @index
  token: String @index
  kind: String @index
}

type BlockTransactionCount @entity {
  id: ID!
  blockNumber: BigInt! @index
  blockTimestamp: DateTime! @index
  totalSignedTransactions: Int!
}
