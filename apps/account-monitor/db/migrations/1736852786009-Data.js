module.exports = class Data1736852786009 {
    name = 'Data1736852786009'

    async up(db) {
        await db.query(`CREATE TABLE "prediction_market_creation" ("id" character varying NOT NULL, "block_number" numeric, "amount" text, "base_asset_kind" text, "base_asset_value" integer, "creator_fee" integer, "dispute_duration" integer, "grace_period" integer, "oracle_duration" integer, "dispute_mechanism" text, "market_type" text, "spot_prices" text array, "swap_fee" text, "oracle_id" character varying, CONSTRAINT "PK_75c65afd0e5510f4d5eace8883b" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_c7fc513e4220b80c81b7e901d6" ON "prediction_market_creation" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_cff9a19fe56544be87c21ddd07" ON "prediction_market_creation" ("amount") `)
        await db.query(`CREATE INDEX "IDX_2c5896604a46b935e35984106e" ON "prediction_market_creation" ("base_asset_kind") `)
        await db.query(`CREATE INDEX "IDX_63f86725ce134c302cf3c9f004" ON "prediction_market_creation" ("dispute_mechanism") `)
        await db.query(`CREATE INDEX "IDX_6b1a77ab22c1e5c6bd648e9f70" ON "prediction_market_creation" ("market_type") `)
        await db.query(`CREATE INDEX "IDX_14ba274a826105fb66f780515a" ON "prediction_market_creation" ("oracle_id") `)
        await db.query(`CREATE TABLE "prediction_market_asset_transfer" ("id" character varying NOT NULL, "block_number" numeric, "amount" text, "token" text, "kind" text, "to_id" character varying, CONSTRAINT "PK_3348b83fb18049080a5887f1a3f" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_84d27a6bf809c243929c554fad" ON "prediction_market_asset_transfer" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_1941d25948b7ae2c88dfdd230f" ON "prediction_market_asset_transfer" ("amount") `)
        await db.query(`CREATE INDEX "IDX_e253398b8a8d31c1877da8b4ce" ON "prediction_market_asset_transfer" ("to_id") `)
        await db.query(`CREATE INDEX "IDX_804a1515d6c974ec8147817aae" ON "prediction_market_asset_transfer" ("token") `)
        await db.query(`CREATE INDEX "IDX_6a090705e00e74f723769bd430" ON "prediction_market_asset_transfer" ("kind") `)
        await db.query(`CREATE TABLE "prediction_market_trade" ("id" character varying NOT NULL, "block_number" numeric, "operation_type" text NOT NULL, "amount_in" text, "market_id" text, "max_price" text, "asset_count" integer, "asset_kind" text, "asset_value" text array, "strategy" text, CONSTRAINT "PK_96fb6e22fef56b31090485544fb" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_b3bd4ad708debacbb54ff4427c" ON "prediction_market_trade" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_89d10b287c21b898b58bfb8555" ON "prediction_market_trade" ("operation_type") `)
        await db.query(`CREATE INDEX "IDX_bf76f297fceff8d67341dfc35a" ON "prediction_market_trade" ("amount_in") `)
        await db.query(`CREATE INDEX "IDX_e396d039de36e6136a3e0a0c76" ON "prediction_market_trade" ("market_id") `)
        await db.query(`CREATE INDEX "IDX_b2d2ca5cc2b8ee4c0298b66392" ON "prediction_market_trade" ("asset_kind") `)
        await db.query(`CREATE INDEX "IDX_15d5784836bf12513de360b38f" ON "prediction_market_trade" ("strategy") `)
        await db.query(`CREATE TABLE "prediction_market_token_withdrawal" ("id" character varying NOT NULL, "block_number" numeric, "amount" text, "token" text, CONSTRAINT "PK_1e90e6b54ea957aeff3eff86e1d" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_94e7f81cb2f7c57b737be84f30" ON "prediction_market_token_withdrawal" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_18082137d11f3882b7abb3e0d9" ON "prediction_market_token_withdrawal" ("amount") `)
        await db.query(`CREATE INDEX "IDX_0545f61f3813f961462a9fd0ff" ON "prediction_market_token_withdrawal" ("token") `)
        await db.query(`CREATE TABLE "prediction_market_share_redemption" ("id" character varying NOT NULL, "block_number" numeric, "market_id" text, CONSTRAINT "PK_fe8daad619cf2741cd24674eea3" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_e1d13d0493ce4b4cde5d20d4ba" ON "prediction_market_share_redemption" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_4383dd6ac49ad5af577285f89c" ON "prediction_market_share_redemption" ("market_id") `)
        await db.query(`ALTER TABLE "prediction_market_creation" ADD CONSTRAINT "FK_14ba274a826105fb66f780515aa" FOREIGN KEY ("oracle_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "prediction_market_asset_transfer" ADD CONSTRAINT "FK_e253398b8a8d31c1877da8b4ce2" FOREIGN KEY ("to_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)

        // await db.query(`GRANT USAGE ON SCHEMA public To readonly`) 
        // await db.query(`GRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly`) 
        // await db.query(`GRANT SELECT ON ALL SEQUENCES IN SCHEMA public TO readonly`) 

        // await db.query(`GRANT USAGE ON SCHEMA public To explorer_ro`) 
        // await db.query(`GRANT SELECT ON ALL TABLES IN SCHEMA public TO explorer_ro`) 
        // await db.query(`GRANT SELECT ON ALL SEQUENCES IN SCHEMA public TO explorer_ro`)
    }

    async down(db) {
        await db.query(`DROP TABLE "prediction_market_creation"`)
        await db.query(`DROP INDEX "public"."IDX_c7fc513e4220b80c81b7e901d6"`)
        await db.query(`DROP INDEX "public"."IDX_cff9a19fe56544be87c21ddd07"`)
        await db.query(`DROP INDEX "public"."IDX_2c5896604a46b935e35984106e"`)
        await db.query(`DROP INDEX "public"."IDX_63f86725ce134c302cf3c9f004"`)
        await db.query(`DROP INDEX "public"."IDX_6b1a77ab22c1e5c6bd648e9f70"`)
        await db.query(`DROP INDEX "public"."IDX_14ba274a826105fb66f780515a"`)
        await db.query(`DROP TABLE "prediction_market_asset_transfer"`)
        await db.query(`DROP INDEX "public"."IDX_84d27a6bf809c243929c554fad"`)
        await db.query(`DROP INDEX "public"."IDX_1941d25948b7ae2c88dfdd230f"`)
        await db.query(`DROP INDEX "public"."IDX_e253398b8a8d31c1877da8b4ce"`)
        await db.query(`DROP INDEX "public"."IDX_804a1515d6c974ec8147817aae"`)
        await db.query(`DROP INDEX "public"."IDX_6a090705e00e74f723769bd430"`)
        await db.query(`DROP TABLE "prediction_market_trade"`)
        await db.query(`DROP INDEX "public"."IDX_b3bd4ad708debacbb54ff4427c"`)
        await db.query(`DROP INDEX "public"."IDX_89d10b287c21b898b58bfb8555"`)
        await db.query(`DROP INDEX "public"."IDX_bf76f297fceff8d67341dfc35a"`)
        await db.query(`DROP INDEX "public"."IDX_e396d039de36e6136a3e0a0c76"`)
        await db.query(`DROP INDEX "public"."IDX_b2d2ca5cc2b8ee4c0298b66392"`)
        await db.query(`DROP INDEX "public"."IDX_15d5784836bf12513de360b38f"`)
        await db.query(`DROP TABLE "prediction_market_token_withdrawal"`)
        await db.query(`DROP INDEX "public"."IDX_94e7f81cb2f7c57b737be84f30"`)
        await db.query(`DROP INDEX "public"."IDX_18082137d11f3882b7abb3e0d9"`)
        await db.query(`DROP INDEX "public"."IDX_0545f61f3813f961462a9fd0ff"`)
        await db.query(`DROP TABLE "prediction_market_share_redemption"`)
        await db.query(`DROP INDEX "public"."IDX_e1d13d0493ce4b4cde5d20d4ba"`)
        await db.query(`DROP INDEX "public"."IDX_4383dd6ac49ad5af577285f89c"`)
        await db.query(`ALTER TABLE "prediction_market_creation" DROP CONSTRAINT "FK_14ba274a826105fb66f780515aa"`)
        await db.query(`ALTER TABLE "prediction_market_asset_transfer" DROP CONSTRAINT "FK_e253398b8a8d31c1877da8b4ce2"`)
    }
}
